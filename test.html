<button id="showPopupButton">Afficher le popup</button>
<div id="popupContainer" class="popup-container">
  <div class="popup-content">


    <div class="changescore">
        <div class="elements">
          <button class="finish-button">
            <div class="finish-text">Terminé</div>
          </button>
          <div class="classes">
            <div class="class-1">
              <button class="add-button-1">
                <div class="horz"></div>
                <div class="vert"></div></button
              ><button class="remove-button-1">
                <div class="horz"></div>
              </button>
              <div class="score-frame"></div>
              <div class="class-name">Tale STI2D</div>
              <div class="class-score" id="score1">0</div>
            </div>
            <div class="class-2">
              <button class="add-button-2">
                <div class="horz"></div>
                <div class="vert"></div></button
              ><button class="remove-button-2">
                <div class="horz"></div></button
              ><div class="score-frame-2"></div>
              <div class="class-name-2">Tale STI2D</div>
              <div class="class-score-2" id="score2">0</div>
            </div>
          </div>
          <div class="text-2">Appliquez des modifications en direct.</div>
          <div class="title">Changer le score</div>
          <div id="confirmation-message"></div>
        </div>
    </div>
    
    <script>
    // Charge les données depuis le fichier JSON au chargement de la page
    window.addEventListener("load", function () {
      fetch("scores.json")
        .then((response) => response.json())
        .then((data) => {
          scoreclass1 = data.scoreclass1;
          scoreclass2 = data.scoreclass2;
          updateScore1();
          updateScore2();
        });
    });
    
    var scoreElement1 = document.getElementById("score1");
    var scoreElement2 = document.getElementById("score2");
    var confirmationMessage = document.getElementById("confirmation-message");
    
    function updateScore1() {
      scoreElement1.textContent = scoreclass1;
      confirmationMessage.textContent = "Score 1 mis à jour : " + scoreclass1;
    }
    
    function updateScore2() {
      scoreElement2.textContent = scoreclass2;
      confirmationMessage.textContent = "Score 2 mis à jour : " + scoreclass2;
    }
    
    document.querySelector(".add-button-1").addEventListener("click", function () {
      scoreclass1++;
      updateScore1();
      updateScoreInJSON();
    });
    
    document.querySelector(".remove-button-1").addEventListener("click", function () {
      if (scoreclass1 > 0) {
        scoreclass1--;
        updateScore1();
        updateScoreInJSON();
      }
    });
    
    document.querySelector(".add-button-2").addEventListener("click", function () {
      scoreclass2++;
      updateScore2();
      updateScoreInJSON();
    });
    
    document.querySelector(".remove-button-2").addEventListener("click", function () {
      if (scoreclass2 > 0) {
        scoreclass2--;
        updateScore2();
        updateScoreInJSON();
      }
    });
    
    // Met à jour le fichier JSON avec les scores actuels
    function updateScoreInJSON() {
      const scoreData = {
        scoreclass1: scoreclass1,
        scoreclass2: scoreclass2,
      };
    
      fetch("scores.json", {
        method: "PUT", // Utilisez PUT pour mettre à jour le fichier JSON
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(scoreData),
      });
    }

    </script>
    
    <style>
    .changescore,
    .changescore * {
    box-sizing: border-box;
    }
    .changescore {
    background: #ffffff;
    border-radius: 20.55px;
    width: 600px;
    height: 489px;
    position: relative;
    overflow: hidden;
    }
    .elements {
    width: 418px;
    height: 417px;
    position: absolute;
    left: calc(50% - 209px);
    top: 36px;
    }
    .finish-button {
    background: #5464f4;
    border-radius: 68.49px;
    padding: 8px 19px 8px 19px;
    display: flex;
    flex-direction: row;
    gap: 10px;
    align-items: center;
    justify-content: center;
    width: 116px;
    height: 39px;
    position: absolute;
    left: 151px;
    top: calc(50% - -169.5px);
    border: none;
    transition: background-color 0.2s;
    cursor: pointer;
    }
    .finish-button:hover{
        background-color: #4755d4;
        transition: background-color 0.2s;
    }
    .finish-button:active{
        background-color: #3844b1;
        transition: background-color 0.2s;
    }
    .finish-text {
    color: #ffffff;
    text-align: center;
    font: 700 19.18px "Roboto Flex", sans-serif;
    position: relative;
    width: 77px;
    display: flex;
    align-items: center;
    justify-content: center;
    }
    .classes {
    width: 418px;
    height: 259px;
    position: absolute;
    left: calc(50% - 209px);
    top: calc(50% - 117.5px);
    }
    .class-1 {
    width: 151px;
    height: 259px;
    position: absolute;
    left: 0px;
    top: 0px;
    }
    .add-button-1 {
    background: #ffffff;
    border-radius: 100px;
    width: 56px;
    height: 56px;
    position: absolute;
    left: calc(50% - 75.5px);
    top: calc(50% - -73.5px);
    border: none;
    transition: background-color 0.2s;
    cursor: pointer;
    }
    .add-button-1:hover{
        background-color: #e7e7e8;
        transition: background-color 0.2s;
    }
    .add-button-1:active{
        background-color: #cfd0d1;
        transition: background-color 0.2s;
    }
    .horz {
    background: #000000;
    border-radius: 100px;
    width: 32px;
    height: 4px;
    position: absolute;
    left: calc(50% - 16px);
    top: calc(50% - 2px);
    }
    .vert {
    background: #000000;
    border-radius: 100px;
    width: 32px;
    height: 4px;
    position: absolute;
    left: calc(50% - 2px);
    top: calc(50% - -16px);
    transform-origin: 0 0;
    transform: rotate(-90deg) scale(1, 1);
    }
    .remove-button-1 {
    background: #ffffff;
    border-radius: 100px;
    width: 56px;
    height: 56px;
    position: absolute;
    left: calc(50% - -19.5px);
    top: calc(50% - -73.5px);
    border: none;
    transition: background-color 0.2s;
    cursor: pointer;
    }
    .remove-button-1:hover{
        background-color: #e7e7e8;
        transition: background-color 0.2s;
    }
    .remove-button-1:active{
        background-color: #cfd0d1;
        transition: background-color 0.2s;
    }
    .score-frame {
    border-radius: 20px;
    border-style: solid;
    border-color: #eff3f4;
    border-width: 2px;
    width: 151px;
    height: 151px;
    position: absolute;
    left: calc(50% - 75.5px);
    top: calc(50% - 129.5px);
    }
    .class-name {
    color: #000000;
    text-align: center;
    font: 400 20.55px "Roboto Flex", sans-serif;
    position: absolute;
    left: calc(50% - 47.5px);
    top: calc(50% - -35.5px);
    display: flex;
    align-items: center;
    justify-content: center;
    }
    .class-score {
    color: #000000;
    text-align: center;
    font: 400 48.63px "Roboto Mono", sans-serif;
    position: absolute;
    left: calc(50% - 67.5px);
    top: 18.5%;
    width: 135px;
    display: flex;
    align-items: center;
    justify-content: center;
    }
    .class-2 {
    width: 151px;
    height: 259px;
    position: absolute;
    left: 267px;
    top: 0px;
    }
    .add-button-2 {
    background: #ffffff;
    border-radius: 100px;
    width: 56px;
    height: 56px;
    position: absolute;
    left: calc(50% - 75.5px);
    top: calc(50% - -73.5px);
    border: none;
    transition: background-color 0.2s;
    cursor: pointer;
    }
    .add-button-2:hover{
        background-color: #e7e7e8;
        transition: background-color 0.2s;
    }
    .add-button-2:active{
        background-color: #cfd0d1;
        transition: background-color 0.2s;
    }
    .remove-button-2 {
    background: #ffffff;
    border-radius: 100px;
    width: 56px;
    height: 56px;
    position: absolute;
    left: calc(50% - -19.5px);
    top: calc(50% - -73.5px);
    border: none;
    transition: background-color 0.2s;
    cursor: pointer;
    }
    .remove-button-2:hover{
        background-color: #e7e7e8;
        transition: background-color 0.2s;
    }
    .remove-button-2:active{
        background-color: #cfd0d1;
        transition: background-color 0.2s;
    }
    .score-frame-2 {
    background-color: white;
    border-radius: 20px;
    border-style: solid;
    border-color: #eff3f4;
    border-width: 2px;
    width: 151px;
    height: 151px;
    position: absolute;
    left: calc(50% - 75.5px);
    top: calc(50% - 129.5px);
    }
    .class-name-2 {
    color: #000000;
    text-align: center;
    font: 400 20.55px "Roboto Flex", sans-serif;
    position: absolute;
    left: calc(50% - 47.5px);
    top: calc(50% - -35.5px);
    display: flex;
    align-items: center;
    justify-content: center;
    }
    .class-score-2 {
    color: #000000;
    text-align: center;
    font: 400 48.63px "Roboto Mono", sans-serif;
    position: absolute;
    left: calc(50% - 67.5px);
    top: 18.5%;
    width: 135px;
    display: flex;
    align-items: center;
    justify-content: center;
    }
    .text-2 {
    color: #646464;
    text-align: center;
    font: 400 17px "Roboto Flex", sans-serif;
    position: absolute;
    left: calc(50% - 165px);
    top: calc(50% - 165.5px);
    width: 330px;
    display: flex;
    align-items: center;
    justify-content: center;
    }
    .title {
    color: #000000;
    text-align: center;
    font: 800 28px "Roboto Flex", sans-serif;
    position: absolute;
    left: 44px;
    top: calc(50% - 208.5px);
    width: 330px;
    display: flex;
    align-items: center;
    justify-content: center;
    }

    </style>


  <script>
    const socket = new WebSocket('https://tristand75.github.io/jeuxdemun/'); // Remplacez l'URL par celle de votre serveur WebSocket
  
    // Fonction pour mettre à jour le score localement et l'envoyer au serveur
    function updateScoreAndSend(scoreclass1, scoreclass2) {
      const data = { scoreclass1, scoreclass2 };
      socket.send(JSON.stringify(data));
    }
  
    socket.addEventListener('message', (event) => {
      const data = JSON.parse(event.data);
      scoreclass1 = data.scoreclass1;
      scoreclass2 = data.scoreclass2;
  
      // Mettre à jour l'affichage des scores
      document.getElementById('score1').textContent = scoreclass1;
      document.getElementById('score2').textContent = scoreclass2;
  
      // Afficher le popup ici si nécessaire
    });
  
    // Vos gestionnaires d'événements de bouton restent les mêmes
    document.querySelector('.add-button-1').addEventListener('click', function () {
      scoreclass1++;
      updateScoreAndSend(scoreclass1, scoreclass2);
    });
  
    document.querySelector('.remove-button-1').addEventListener('click', function () {
      if (scoreclass1 > 0) {
        scoreclass1--;
        updateScoreAndSend(scoreclass1, scoreclass2);
      }
    });
  
    document.querySelector('.add-button-2').addEventListener('click', function () {
      scoreclass2++;
      updateScoreAndSend(scoreclass1, scoreclass2);
    });
  
    document.querySelector('.remove-button-2').addEventListener('click', function () {
      if (scoreclass2 > 0) {
        scoreclass2--;
        updateScoreAndSend(scoreclass1, scoreclass2);
      }
    });
  
    document.getElementById('showPopupButton').addEventListener('click', function () {
      var popup = document.getElementById('popupContainer');
      popup.style.display = 'none';
    });
  </script>
  <style>
    .popup-container {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5); /* Fond foncé semi-transparent */
  backdrop-filter: blur(10px); /* Flou de l'arrière-plan */
  z-index: 999; /* Assurez-vous que le popup s'affiche au-dessus de tout le reste */
}

.popup-content {
  background-color: #ffffff;
  border-radius: 30px;
  width: 600px;
  height: 489px;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  overflow: hidden;
}
  </style>
</div>
